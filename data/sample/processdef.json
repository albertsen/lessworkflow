{
    "id": "fulfilorder",
    "type": "processdefs",
    "content": {
        "description": "Example order fulfilment process",
        "workflow": {
            "actions": {
                "createOrder": {
                    "url": "http://actionhandler.lw.svc.cluster.local/handlers/createOrder"
                },
                "capturePayment": {
                    "url": "http://actionhandler.lw.svc.cluster.local/handlers/capturePayment"
                },
                "shipOrder": {
                    "url": "http://actionhandler.lw.svc.cluster.local/handlers/shipOrder"
                },
                "error": {
                    "url": "http://actionhandler.lw.svc.cluster.local/handlers/error"
                },
                "done": {
                    "url": "http://actionhandler.lw.svc.cluster.local/handlers/done"
                }
            },
            "steps": {
                "start": {
                    "action": "checkOrder",
                    "transitions": {
                        "OK": "capturePayment",
                        "ERROR": "error"
                    }
                },
                "capturePayment": {
                    "action": "capturePayment",
                    "transitions": {
                        "PAYMENT_CAPTURED": "splitOrder",
                        "ERROR": "error"
                    }
                },
                "shipOrder": {
                    "action": "shipOrder",
                    "transitions": {
                        "ORDER_SPLIT": "waitForShipment",
                        "ERROR": "error"
                    }
                },
                "waitForShipment": {
                    "waitFor": "shipped",
                    "transitions": {
                        "SHIPPED": "done",
                        "ERROR": "error"
                    }
                },
                "error": {
                    "action": "error"
                },
                "done": {
                    "action": "done"
                }
            }
        }
    }
}