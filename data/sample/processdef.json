{
    "id": "fulfilorder",
    "type": "processdefs",
    "content": {
        "description": "Example order fulfilment process",
        "workflow": {
            "handlers": {
                "createOrder": {
                    "url": "http://actionhandler.lw.svc.cluster.local/handlers/createOrder"
                },
                "capturePayment": {
                    "url": "http://actionhandler.lw.svc.cluster.local/handlers/capturePayment"
                },
                "shipOrder": {
                    "url": "http://actionhandler.lw.svc.cluster.local/handlers/shipOrder"
                },
                "error": {
                    "url": "http://actionhandler.lw.svc.cluster.local/handlers/error"
                },
                "done": {
                    "url": "http://actionhandler.lw.svc.cluster.local/handlers/done"
                }
            },
            "actions": {
                "start": {
                    "alias": "checkOrder"
                },
                "checkOrder": {
                    "handler": "start",
                    "transitions": {
                        "CREATED": "capturePayment",
                        "ERROR": "error"
                    }
                },
                "capturePayment": {
                    "handler": "capturePayment",
                    "transitions": {
                        "PAYMENT_CAPTURED": "splitOrder",
                        "ERROR": "error"
                    }
                },
                "shipOrder": {
                    "handler": "shipOrder",
                    "transitions": {
                        "ORDER_SPLIT": "waitForShipment",
                        "ERROR": "error"
                    }
                },
                "waitForShipment": {
                    "waitFor": "shipped",
                    "transitions": {
                        "SHIPPED": "done",
                        "ERROR": "error"
                    }
                },
                "error": {
                    "handler": "error"
                },
                "done": {
                    "handler": "done"
                }
            },
            "start": "createOrder"
        }
    }
}